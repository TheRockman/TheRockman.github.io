<!DOCTYPE html>
<html ng-app="myApp">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">
  <title></title>
  <link rel="stylesheet" href="style.css" media="screen" title="no title" charset="utf-8">
  <link rel="stylesheet" href="car.css" media="screen" title="no title" charset="utf-8">
  <script type="text/javascript" src="../../angularJs.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-touch.js"></script>
  <script type="text/javascript" src="car.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
</head>
<body>

  <div ng-controller="mainCtrl">
    <div ng-if="!tutorial" class="draw">
      <button type="button" name="button" ng-click="determineTutorial('main')">New game</button>
      <button type="button" name="button" ng-click="determineTutorial('run')">Tutorial</button>
    </div>
    <div ng-cloak ng-if="currentDeck.length > 0">
      <div class="row">
        <div class="flex">

          <div ng-cloak ng-if="!crewComplete">
            <div class="response" >
              <h4>Build a crew</h4>
              <i>Select 3</i>
              <p class="align selected-crew" ng-repeat="mate in finalCrew" ng-click="crewPick(mate)">
                <img ng-src="{{mate.Portrait}}" >
                &nbsp;
                &nbsp;
                <span>
                  <b>{{mate.Name}}</b>
                  <br>
                  <small>{{mate.Status}} {{mate.Perk}}</small>
                </span>
              </p>
              <p class="align" ng-repeat="mate in availableCrew" ng-click="crewPick(mate)">
                <img ng-src="{{mate.Portrait}}" >
                &nbsp;
                &nbsp;
                <span>
                  <b>{{mate.Name}}</b>
                  <br>
                  <small>{{mate.Status}} {{mate.Perk}}</small>
                </span>
              </p>
            </div>
            <div class="draw"  ng-if="finalCrew.length > 2">
              <button class="pointer" ng-click="crewPick()">
                Confirm crew
              </button>
            </div>
          </div>


          <div ng-cloak class="response" ng-if="candraw === true && !response && tutorial !== 'run' && crewComplete">
            <h4>Backstory</h4>
            <i>
              You set out with
              <span ng-repeat="mate in finalCrew">
                <span ng-if="$last"> and </span>
                {{mate.Name}}<span ng-if="!$last">,</span>
              </span>
              sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</i>
          </div>

          <div ng-cloak class="response" ng-if="candraw === true && !response && tutorial === 'run'">
            <h4>Tutorial</h4>
            <i> The bar shows how much is left of your journey. Your resources are shown at the bottom of the screen. Tap "draw" to continue.</i>
          </div>

          <div ng-cloak class="center response" ng-if="candraw === true && response">
            <i>{{response}}</i>
          </div>

          <div ng-cloak ng-repeat="card in activeCard">
            <div class="center response" ng-class="{'title-enter':candraw === false}">
              <h4>{{card.Name}}</h4>
              <i>{{card.Desc}}</i>
            </div>

            <div>
              <ul rn-carousel class="image swipe-wrap">
                <li ng-cloak class="pointer ability-wrap" ng-class="{'not-possible':ability.Possible === false, 'card-enter':candraw === false}" ng-repeat="ability in card.Abilities">

                  <div id="tv">
                    {{ability.Text}}
                  </div>

                  <div ng-cloak class="icon-coin" ng-if="ability.Name === 'pay'">
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                      <path fill="#333" d="M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M8,17L12,21.5L16,17H8Z" />
                    </svg>
                  </div>

                  <div ng-cloak class="icon-coin" ng-if="ability.Name === 'convert'">
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                      <path fill="#333" d="M12,2.5L8,7H16L12,2.5M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M8,17L12,21.5L16,17H8Z" />
                    </svg>
                  </div>

                  <div ng-cloak class="icon-coin" ng-if="ability.Name === 'gain'">
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                      <path fill="#333" d="M12,2.5L8,7H16L12,2.5M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10Z" />
                    </svg>
                  </div>

                  <div ng-cloak class="icon-coin" ng-if="ability.Name === 'discard'">
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                        <path fill="#333" d="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12" />
                    </svg>
                  </div>

                  <div ng-cloak class="icon-coin" ng-if="ability.Name === 'event'">
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                        <path fill="#333" d="M21.5,10.8L13.2,2.5C12.5,1.8 11.5,1.8 10.8,2.5L2.5,10.8C1.8,11.5 1.8,12.5 2.5,13.2L10.8,21.5C11.5,22.2 12.5,22.2 13.2,21.5L21.5,13.2C22.1,12.5 22.1,11.5 21.5,10.8M12.5,17H11V15.5H12.5V17M14.3,11.8C13.9,12.3 13.2,12.6 12.9,13.1C12.6,13.5 12.6,14 12.6,14.5H11C11,13.7 11,13 11.3,12.5C11.6,12 12.3,11.7 12.7,11.4C13.9,10.3 13.6,8.7 11.9,8.6C11.1,8.6 10.4,9.3 10.4,10.1H9C9,8.4 10.3,7.1 12,7.1C14.7,7.1 15.9,9.8 14.3,11.8Z" />
                    </svg>
                  </div>

                  <div ng-cloak class="icon-coin" ng-if="ability.Name === 'concede'">
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                      <path fill="#333" d="M12,2A9,9 0 0,0 3,11C3,14.03 4.53,16.82 7,18.47V22H9V19H11V22H13V19H15V22H17V18.46C19.47,16.81 21,14 21,11A9,9 0 0,0 12,2M8,11A2,2 0 0,1 10,13A2,2 0 0,1 8,15A2,2 0 0,1 6,13A2,2 0 0,1 8,11M16,11A2,2 0 0,1 18,13A2,2 0 0,1 16,15A2,2 0 0,1 14,13A2,2 0 0,1 16,11M12,14L13.5,17H10.5L12,14Z" />
                    </svg>
                  </div>
                    <br>
                    <br>
                    <b>
                      <span ng-if="ability.Amount">
                        <span ng-if="ability.Name == 'gain'">+</span>
                        <span ng-if="ability.Name == 'pay' || ability.Name == 'convert'">-</span>
                        {{ability.Amount}} {{ability.Type}} <br>
                      </span>
                      <span ng-if="ability.ForAmount">
                        + {{ability.ForAmount}} {{ability.ForType}} <br>
                      </span>
                      <span ng-if="ability.Insert">
                        [Insert "{{ability.Insert}}"] <br>
                      </span>
                    </b>
                  <br>
                  <button type="button" class="pick-ability" ng-click="activate(card, ability)" name="button">Choose</button>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="draw" ng-if="crewComplete" ng-class="{'drawn':candraw === false}">
        <input type="range" style="width:100%;" ng-model="progress" min="1" max="30" disabled name="" value="">
        <button class="pointer" ng-class="{'flip':candraw === true}" ng-click="pickTopCard(true)">
          draw
        </button>
      </div>

      <div class="stats align jsb">
        <p ng-class="{'danger':hearts>14}">H: {{hearts}}</p>
        <p ng-class="{'danger':clubs>14}">C: {{clubs}}</p>
        <p ng-class="{'danger':diamonds>14}">D: {{diamonds}}</p>
        <p ng-class="{'danger':spades>14}">S: {{spades}}</p>
        <p ng-class="{'danger':joker>14}">J: {{joker}}</p>
      </div>
      
      <!-- Crew stats-->
      <div class="show-hide-crew" ng-if="crewComplete" ng-click="toggleCrewStats()">
        <svg style="width:24px;height:24px" viewBox="0 0 24 24">
          <path fill="#ffffff" d="M12,6A3,3 0 0,0 9,9A3,3 0 0,0 12,12A3,3 0 0,0 15,9A3,3 0 0,0 12,6M6,8.17A2.5,2.5 0 0,0 3.5,10.67A2.5,2.5 0 0,0 6,13.17C6.88,13.17 7.65,12.71 8.09,12.03C7.42,11.18 7,10.15 7,9C7,8.8 7,8.6 7.04,8.4C6.72,8.25 6.37,8.17 6,8.17M18,8.17C17.63,8.17 17.28,8.25 16.96,8.4C17,8.6 17,8.8 17,9C17,10.15 16.58,11.18 15.91,12.03C16.35,12.71 17.12,13.17 18,13.17A2.5,2.5 0 0,0 20.5,10.67A2.5,2.5 0 0,0 18,8.17M12,14C10,14 6,15 6,17V19H18V17C18,15 14,14 12,14M4.67,14.97C3,15.26 1,16.04 1,17.33V19H4V17C4,16.22 4.29,15.53 4.67,14.97M19.33,14.97C19.71,15.53 20,16.22 20,17V19H23V17.33C23,16.04 21,15.26 19.33,14.97Z" />
        </svg>
      </div>
      <ul ng-cloak rn-carousel ng-if="crewStats" class="swipe-wrap crew-swipe">
          <li ng-repeat="crew in finalCrew">
            <div style="background:#222;color:white;">
              <div class="align">
                <img ng-src="{{crew.Portrait}}">
                <h2> 
                  &nbsp;
                  &nbsp;
                  &nbsp;
                  {{crew.Name}}
                </h2>
              </div>
              <div style="padding: 1rem;">
                <h3 style="margin:0;">{{crew.Status}}</h3>
                <span ng-if="crew.Status == 'Healthy'">No issues</span>
                <span ng-if="crew.Status == 'Sickly'">Chance to increase healt related costs</span>
                <span ng-if="crew.Status == 'Drunk'">Slight risk to miss bonuses</span>
          
                <hr>
                <h3 style="margin:0;">{{crew.Perk}}</h3>
                <span ng-if="crew.Perk == 'Pirate'">Chance to gain bonuses while doing pirate things</span>
                <span ng-if="crew.Perk == 'Trader'">Chance to gain bonuses while doing exchanges</span>
                <span ng-if="crew.Perk == 'Doctor'">Chance to gain bonuses while picking health related options</span>
                <span ng-if="crew.Perk == 'Navigator'">Chance to gain bonuses while sailing</span>
              </div>
            </div> 
          </li>
      <ul>
    </div>

  </div>
</body>
<script type="text/javascript" src="app.js"></script>

</html>
